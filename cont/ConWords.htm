<html><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
<title>Исследование контрольных слов объектов</title>
<LINK REL="stylesheet" MEDIA="screen" TYPE="text/css" HREF="../style.css">
<script language="JScript" src="../rec/script.js"></script>
<style> a:link.button, a:visited.button {display:inline}
	p {text-align:justify}
</style>
</head>
<body scroll="no">
<DIV id="buttonMenu">
<SPAN CLASS="options">Разделы:&nbsp;&nbsp;</SPAN>

	<A HREF="#1" title="Немного теории&hellip;" CLASS="button">Вводная&nbsp;часть</A>
	<A HREF="#2" title="Описание структуры контрольных слов объектов&hellip;" CLASS="button">Описание&nbsp;типов&nbsp;объектов</A>
	<A HREF="#3" title="Выводы из всего вышесказанного&hellip;" CLASS="button">Заключение</A>
	<A style="position:absolute; right:4" href="#UP" CLASS="button" title="Вернуться к началу">&uarr;</a>
</DIV>
<DIV id="text">
<a name="up"></a>

<h2 align="center">Исследование &laquo;контрольных слов&raquo; объектов карты.</h2>
<p id="ri"><i>Миханик © 2008 г.</i></p>

<a name="1"></a><h3>Что такое контрольное слово?</h3>

<p>Контрольное слово – это 32-битовое число (-2147483648..2147483647) («слово» в ассемблере как раз означает такой объём памяти), являющееся одним из параметров каждой клетки поля и редактирующееся командой&nbsp;<a href="../Rec/OB.htm#C">OB:C</a>. В отличие от таких параметров, как тип почвы или проходимость, он, подобно <a href="../Rec/PO.htm">ресиверу PO</a>, задаёт не характеристики самой почвы, а характеристики стоящего на ней объекта (и поэтому-то для доступа к нему используется <a href="../Rec/OB.htm">!!OB</a>). Как известно, в Героях 3 существует более двухсот <a target="form" href="../form/objects.htm">типов объектов</a>, и только 62 из них имеют такие характеристики. Данное исследование ставит целью разобрать, какие параметры задаёт контрольное слово в каждом из этих 62-х случаев. В принципе, почти ничего нового здесь не содержится, т. к. некоторые ERM-команды, помимо <a href="../Rec/OB.htm#C">OB:C</a>, также редактируют контрольное слово. Чуть ниже это будет указано. Но немного нового всё же есть.</p>

<h4>Двоичное представление чисел в ассемблере</h4>

<p>Прежде чем начать, нужно дать тем из читателей, кто не знаком с ассемблером, представление о двоичном формате чисел в нём. Кратко затрону эту тему чисто с практической стороны. (Я думаю, что уж двоичную систему счисления все знают.) В WoG'е используются преимущественно 32-битные числа, т. е. числа с длиной не больше 32 двоичных знаков. (В дальнейшем "бит" как раз будет обозначать двоичный знак. Как принято в ассемблере, биты нумеруются справа налево, начиная с 0.) Но дело в том, что последний бит используется для записи знака числа ("+" или "-"), и на само число реально отводится только 31 бит. Но это ещё не всё! Если 863 записывается как 1101011111, или 00000000000000000000001101011111, то -863 записывается не как 10000000000000000000001101011111, а как 11111111111111111111110010100001, что есть ни что иное, как число 000000000000000000001101011110 = 862, в котором единицы заменили нулями и наоборот. Так записываются все отрицательные числа, в частности -1 записывается как 32 единицы, поскольку противоположное ему число есть 0. Это позволяет уместить в 32 бита число -2147483648, которое в обычном двоичном формате записалось бы как -10000000000000000000000000000000, т. е. 32 цифры и знак "-", и в 32 бита бы не влезло. Кроме того (и это главное), такой формат значительно упрощает вычисления компьютеру. Но нам это неважно.</p>

<h4>Логические операции в WoG</h4>

<p>Также необходимо объяснить, как обращаться с двоичными числами. Для того, чтобы заменить, скажем, биты с 5 по 12 и не затронуть остальные (в дальнейшем это понадобится), пользуются логическими операциями. В WoG'е их три: <a href="../Rec/VR.htm#AND">VR:&amp</a>, <a href="../Rec/VR.htm#OR">VR:|</a> (| здесь - не i прописное, а специальная вертикальная палочка, в английской раскладке - <span class="key">Shift</span>+<span class="key">\</span> - и <a href="../Rec/VR.htm#XOR">VR:X</a>. Они соответственно у программистов называются AND, OR и XOR, а по научному конъюнкция, дизъюнкция и исключающая дизъюнкция. Работают они так: берётся два числа (здесь - одно из переменной, другое как параметр, напр. <b id="erm"><font class="re">!!VR</font>y12:S86 |12;</b> - здесь исходными числами будут 86 и 12), потом берутся их первые биты, обрабатываются по определённому правилу, то, что получилось, записывается в первый бит результата. Аналогично происходит со вторыми битами, третьими и всеми остальными. (У нас результат опять записывается в переменную.) Правила эти таковы:</p>
<p><table cellpadding=5 border=1 align="center">
<tr id="N2" bgcolor=#60b0b0 align="center">	
	<td>AND</td><td>OR</td><td>XOR</td></tr>
<tr>
	<td>0 и 0 &rarr; 0</td><td>0 и 0 &rarr; 0</td><td>0 и 0 &rarr; 0</td></tr>
<tr>
	<td>0 и 1 &rarr; 0</td><td>0 и 1 &rarr; 1</td><td>0 и 1 &rarr; 1</td></tr>
<tr>
	<td>1 и 0 &rarr; 0</td><td>1 и 0 &rarr; 1</td><td>1 и 0 &rarr; 1</td></tr>
<tr>
	<td>1 и 1 &rarr; 1</td><td>1 и 1 &rarr; 1</td><td>1 и 1 &rarr; 0</td></tr>
</table>
</p>

<p>Теперь - как использовать их в данном случае.<br>Покажем это всё на том же примере - записать в число y1 число y2 в биты с 5 по 12.
<ol>
<li> Сначала подготовим число y2.<br>
Поскольку под его запись отведено 8 битов, оно не должно быть длиннее их. На всякий случай "обрежем" его. Как это сделать? Применим команду:
<script type="erm">!!VRy2:&255;</script>
Что она делает? В двоичной записи число 255 выглядит как 00000000000000000000000011111111. Очевидно, что первые 8 битов числа y2 не изменятся - см. выше, 
а остальные превратятся в нули вне зависимости от первоначального значения. Но это нам и надо!</li>
<li> Теперь подготовим y1.<br>В нём нужно "расчистить место" для y2. Сделаем это аналогичным образом:
<script type="erm">!!VRy1:&-4081; , 
где -4081 = 11111111111111111111000000001111 имеет нули как раз с 5 по 12 бит.</script></li>
<li> Можно вставлять y2 в y1.<br>Для этого сначала переделаем y2 так, чтобы нужные нам биты располагались не с 1 по 8, а с 5 по 12, там же, где они и должны быть в y1. Это равнозначно приписыванию к y2 четырёх нулей, т. е. умножению его на 10000 = 16:
<script type="erm">!!VRy2:*16;</script></li>
<li> И, наконец, объединяем y1 и y2.<br>Для этого обратим внимание, что в команде VR:<b>|</b> при соединении с нулём биты не изменяются.<br>
(В принципе VR:X обладает тем же свойством, но его не принято так использовать.)<br>
А у нас с 1 по 4 и с 13 по 32 биты в y2 нули, и нули же в y1 с 5 по 12 биты. Таким образом, после команды:
<script type="erm">!!VRy1:|y2;</script>
&hellip; в y1 1..4 и 6..32 биты не изменятся, а 5..12 заместятся битами из y2. А это нам и надо.<br>
Получаем итоговый скрипт:
<script type="erm">!!VRy2:&255;
!!VRy1:&-4081;
!!VRy2:*16;
!!VRy1:|y2;
; или
!!VRy2:&255 *16;
!!VRy1:&-4081 |y2;</script></li>
</ol>
<p>Поставим более общую задачу: записать в y1 y2 в биты с №<code><b>a</b></code> по №<code><b>b</b></code>.<br>
Соответствующий скрипт выглядит так:
<script type="erm">!!VRy2:&f *g;
!!VRy1:&h |y2; ,</script>
где <b>f</b> = 2<sup>(b-a+1)</sup>-1, <b>g</b>=2<sup>(a-1)</sup>, <b>h</b>=-f&times;g-1=2<sup>(a-1)</sup>-2<sup>b</sup>-1.<br>
Этим скриптом и пользуйтесь.</p>
<a name="2"></a><h3>Структура контрольных слов разных типов объектов</h3>

<form target="_self" action="" style="text-align:left"> 
	<select name="menu" title="Быстрый переход к нужному объекту..." onchange="location=value">
	<option selected value="#">------------ выбор объекта ------------</option>
		<option value="#T4">4. Арена</option>
		<option value="#T5">5. Артефакт</option>
		<option value="#T6">6. Ящик Пандоры</option>
		<option value="#T12">12. Костёр покинутого лагеря</option>
		<option value="#T14">14. Лебединое озеро</option>
		<option value="#T16">16. Банк существ</option>
		<option value="#T17">17-20. Генераторы существ</option>
		<option value="#T22">22. Скелет</option>
		<option value="#T23">23. Башня Марлетто</option>
		<option value="#T24">24. Ветхий корабль</option>
		<option value="#T25">25. Утопия драконов</option>
		<option value="#T26">26. Событие</option>
		<option value="#T29">29. Обломки</option>
		<option value="#T30">30. Фонтан удачи</option>
		<option value="#T32">32. Сад откровения</option>
		<option value="#T33">33. Гарнизон</option>
		<option value="#T34">34. Герой</option>
		<option value="#T39">39. Погреб / Навес</option>
		<option value="#T41">41. Библиотека Просвещения</option>
		<option value="#T42">42. Маяк</option>
		<option value="#T44">44. Монолит выхода</option>
		<option value="#T45">45. Двусторонний монолит</option>
		<option value="#T47">47. Школа магии</option>
		<option value="#T48">48. Магический источник</option>
		<option value="#T51">51. Лагерь наёмников</option>
		<option value="#T53">53. Шахта</option>
		<option value="#T54">54. Монстр</option>
		<option value="#T55">55. Мистический сад</option>
		<option value="#T57">57. Обелиск</option>
		<option value="#T59">59. Океанская бутыль</option>
		<option value="#T61">61. Звёздное колесо</option>
		<option value="#T62">62. Тюрьма</option>
		<option value="#T63">63. Пирамида</option>
		<option value="#T78">78. Лагерь беженцев</option>
		<option value="#T79">79. Ресурс</option>
		<option value="#T81">81. Учёный</option>
		<option value="#T82">82. Морской сундук</option>
		<option value="#T83">83. Хижина провидца</option>
		<option value="#T84">84. Склеп</option>
		<option value="#T85">85. Кораблекрушение</option>
		<option value="#T86">86. Потерпевший..</option>
		<option value="#T87">87. Верфь</option>
		<option value="#T88">88-90. Святыни магии</option>
		<option value="#T91">91. Знак</option>
		<option value="#T93">93. Свиток с заклинанием</option>
		<option value="#T98">98. Город</option>
		<option value="#T100">100. Камень знаний</option>
		<option value="#T101">101. Сундук с сокровищами</option>
		<option value="#T102">102. Древо знаний</option>
		<option value="#T103">103. Врата подземного мира</option>
		<option value="#T104">104. Университет</option>
		<option value="#T105">105. Телега</option>
		<option value="#T107">107. Школа войны</option>
		<option value="#T108">108. Могила воина</option>
		<option value="#T109">109. Водяное колесо</option>
		<option value="#T112">112. Ветряная мельница</option>
		<option value="#T113">113. Хижина ведьмы</option>
		<option value="#T215">215. Страж прохода</option>
	<optgroup label="Дающие ресурсы..">
		<option value="#T12">12. Костёр покинутого лагеря</option>
		<option value="#T29">29. Обломки</option>
		<option value="#T39">39. Погреб / Навес</option>
		<option value="#T53">53. Шахта</option>
		<option value="#T55">55. Мистический сад</option>
		<option value="#T79">79. Ресурс</option>
		<option value="#T86">86. Потерпевший..</option>
		<option value="#T101">101. Сундук с сокровищами*</option>
		<option value="#T105">105. Телега</option>
		<option value="#T109">109. Водяное колесо</option>
		<option value="#T112">112. Ветряная мельница</option>
	</optgroup>
	<optgroup label="С бонусами для героя..">
		<option value="#T4">4. Арена</option>
		<option value="#T14">14. Лебединое озеро</option>
		<option value="#T23">23. Башня Марлетто</option>
		<option value="#T30">30. Фонтан удачи</option>
		<option value="#T32">32. Сад откровения</option>
		<option value="#T41">41. Библиотека Просвещения</option>
		<option value="#T47">47. Школа магии</option>
		<option value="#T51">51. Лагерь наёмников</option>
		<option value="#T61">61. Звёздное колесо</option>
		<option value="#T100">100. Камень знаний</option>
		<option value="#T107">107. Школа войны</option>
		<option value="#T30">30. Фонтан удачи</option>
		<option value="#T48">48. Магический источник</option>
		<option value="#T81">81. Учёный</option>
		<option value="#T83">83. Хижина провидца</option>
		<option value="#T88">88-90. Святыни магии</option>
		<option value="#T101">101. Сундук с сокровищами</option>
		<option value="#T102">102. Древо знаний</option>
		<option value="#T104">104. Университет</option>
		<option value="#T108">108. Могила воина</option>
		<option value="#T113">113. Хижина ведьмы</option>
	</optgroup>
	<optgroup label="Имеющие охрану..">
		<option value="#T6">6. Ящик Пандоры*</option>
		<option value="#T16">16. Банк существ</option>
		<option value="#T17">17-20. Генераторы существ*</option>
		<option value="#T24">24. Ветхий корабль</option>
		<option value="#T25">25. Утопия драконов</option>
		<option value="#T84">84. Склеп</option>
		<option value="#T85">85. Кораблекрушение</option>
	</optgroup>
	<optgroup label="Морские объекты..">
		<option value="#T24">24. Ветхий корабль</option>
		<option value="#T29">29. Обломки</option>
		<option value="#T59">59. Океанская бутыль</option>
		<option value="#T82">82. Морской сундук</option>
		<option value="#T85">85. Кораблекрушение</option>
		<option value="#T86">86. Потерпевший..</option>
	</optgroup>		
		<optgroup label="Однотипные по контрол.слову..">
		<option value="#T4">4. Арена</option>
		<option value="#T23">23. Башня Марлетто</option>
		<option value="#T32">32. Сад откровения</option>
		<option value="#T41">41. Библиотека Просвещения</option>
		<option value="#T47">47. Школа магии</option>
		<option value="#T51">51. Лагерь наёмников</option>
		<option value="#T61">61. Звёздное колесо</option>
		<option value="#T100">100. Камень знаний</option>
		<option value="#T107">107. Школа войны</option>
	</optgroup></select>
</form>

<p>Вот мы и подошли к основной части исследования. Здесь подробно разобраны все 62 типа объектов, содержащих контрольные слова. В случае необходимости указаны первоисточники или соответствующие команды ERM. Надо заметить, что кое-что я раскопал сам, и если эту информацию кто-то добыл независимо от меня, не обижайтесь. Итак&hellip;</p>

<p><a target="form" href="../Form/objects.htm" name="T4">Тип 4</a>. <b>Арена</b><br><img src="../Img/pic/AVSarna0.png" style="max-width:78;float:right;margin: 0 5 0 10">
Контрольное слово представляет собой номер от 0 до 31, занимающий первые 5 битов, остальные игнорируются и обычно пусты. 
Сама Арена параметров не имеет, но, как известно, каждый герой может посетить каждую Арену только раз в жизни, поэтому их необходимо различать. 
Посетил ли герой Арену или нет, редактируется командой <a href="../Rec/HE.htm#V">HE:V7</a>.</p>

<p><a target="form" href="../Form/A1.htm" name="T5">Тип 5</a>. <b>Артефакт</b><br>
В контрольное слово записывается несколько параметров:<br>
<b id="WT">Биты 0-14</b>: соответствует команде <a href="../Rec/AR.htm#V">AR:V</a>: номер заклинания в свитке (0..32767) или (!) тип подбора артефакта (раскопал <code id="N1">ShadowTheAge</code>):<br>
&nbsp;&nbsp;&nbsp;0 – свободный подбор,<br>
&nbsp;&nbsp;&nbsp;1 – за 2000 золотых,<br>
&nbsp;&nbsp;&nbsp;2 – требуется мудрость,<br>
&nbsp;&nbsp;&nbsp;3 – требуется лидерство,<br>
&nbsp;&nbsp;&nbsp;4 – 2500 золотых и 3 дерева,<br>
&nbsp;&nbsp;&nbsp;5 – 3000 золотых и 5 дерева,<br>
&nbsp;&nbsp;&nbsp;6 – включается охрана (вне зависимости от значения <a href="../Rec/AR.htm#X">AR:X</a>),<br>
&nbsp;&nbsp;&nbsp;значения больше 6 - артефакт не поднимается.<br>
При отсутствии охраны пытается запуститься бой с нулём Церберов, который автоматически выигрывается (раскопал <code id="N1">feanor</code>).
Где-то в справке к редактору карт SoD’а написано, что в начале игры выбирается 10-15% артефактов и им устанавливается определённая цена. Или что-то вроде этого.<br>
<b id="WT">Биты 15-18</b>: <del id="dred"><font color="#282828">по-видимому, ничего не значат. Обычно там стоит 0.</font></del><br>
<blockquote id="Q2"><b>Замечание</b> от <b id="N1">XEPOMAHTа</b>: <b id="WT">биты 15-18</b> на самом деле содержат тип ресурса (для 4ого и 5ого типа подбора артефакта), берущийся так же из Контрольного слова битовым сдвигом (по умолчанию там 0 &rarr; дерево).</blockquote>
<b id="WT">Биты 19-30</b>: персональный номер артефакта (0..4095). Каждому номеру соответствует своя отдельная область данных, где хранятся данные, доступ к которым обеспечивается командами&nbsp;<a href="../Rec/AR.htm">AR</a>:G&nbsp;M&nbsp;X.<br>
<b id="WT">Бит 31</b>: есть ли этот номер (1) или его нет (0). Номера может и не быть, если у артефакта нет ни охраны, ни сообщения. В таком случае команды&nbsp;<a href="../Rec/AR.htm">AR</a>:G&nbsp;M&nbsp;X не работают.<br>
31 бит определяет знак числа, поэтому есть простой признак: если контрольное слово отрицательное, то эти команды работают, нет – не работают. (Первым такой признак раскопал <code id="N1">GrayFace</code>)</p>

<p><img src="../Img/pic/AVA0128.png" style="float:left;margin:0 10 20 0"><a target="form" href="../Form/objects.htm" name="T6">Тип 6</a>. <b>Ящик Пандоры</b><br>
<b id="WT">Биты 0-9</b>: персональный номер (0..1023). Опять же, соответствует области данных с командами&nbsp;<a href="../Rec/LE.htm">LE</a>:A&nbsp;B&nbsp;C&nbsp;E&nbsp;F&nbsp;G&nbsp;M&nbsp;N&nbsp;O&nbsp;P&nbsp;R&nbsp;S&nbsp;U&nbsp;X.<br>
<b id="WT">Биты 10-31</b> игнорируются.</p>

<p><img src="../Img/pic/ADCFRA2.png" style="float:left;margin:0 15 0 10">
<a target="form" href="../Form/objects.htm" name="T12">Тип 12</a>. <b>Костёр покинутого лагеря</b><br>
<b id="WT">Биты 0-3</b>:тип ресурса (0..15). Соответствует первому параметру команды <a href="../Rec/FR.htm#B">FR:B</a>. Интересно, что хотя ресурсы имеют номера с 0 по 7 (3 бита), 4ый бит не игнорируется. Устанавливая значения с 8 по 15, мы можем получать в сообщении вместо картинки ресурса картинки артефактов, заклинаний, флагов, удачи и морали – нумерация, как в <a target="form" href="../Form/Picts.htm">IF:Q</a>. Конечно же, на самом деле артефакты и прочее герою не добавляются, но их можно добавить с помощью ERM. Вторым параметром для картинок является кол-во ресурса.<br>
<b id="WT">Биты 4-19</b>:кол-во ресурса. Может быть отрицательным: от -32768 до +32767. Соответствует второму параметру <a href="../Rec/FR.htm#B">FR:B</a>.<br>
<b id="WT">Биты 20-31</b> игнорируются и обычно пусты.</p>

<p><a target="form" href="../Form/objects.htm" name="T14">Тип 14</a>. <b>Лебединое озеро</b><br>
Нужно отметить о таком широко распространённом заблуждении, будто лебединое озеро имеет параметры. Почему-то <a href="wogteam.htm" target="form">WoG Team</a> создала ресивер, редактирующий его контрольное слово, с возможностью задания кол-ва удачи и персонального номера. На самом деле номера у озера нет, да и зачем он ему? А удача всегда +2. Ресивер всё равно пытается редактировать контрольное слово, но бесполезно. Вообще-то в нём (в слове) всегда стоит -1, но тем не менее приведём его состав, каким он предстаёт в воображении разработчиков ERM:<br>
<b id="WT">Биты 0-4</b> содержат номер пруда (0..31), что соответствует <a href="../Rec/SW.htm#N">SW:N</a>.<br><img src="../Img/pic/AVSclvg0.png" style="float:right;margin:5 0 0 10">
<b id="WT">Биты 5-12</b> игнорируются и обычно пусты. (То есть на самом-то деле они  по умолчанию заполнены, как и все, однако при изменении бонуса удачи они зачем-то обнуляются. Возможно, здесь должна была быть информация о посещении игроками.)<br>
<b id="WT">Биты 13-16</b> соответствуют бонусу удачи – то ли от 0 до 15, то ли от -8 до +7. (Хотя в справке указаны предельные значения от 1 до 3.)<br>
<b id="WT">Биты 17-31</b> игнорируются и обычно заполнены.</p>

<p><a target="form" href="../Form/CB.htm" name="T16">Тип 16</a>. <b>Банк существ</b><br>
<b id="WT">Биты 0-4</b> игнорируются и обычно заполнены.<br>
<b id="WT">Биты 5-12</b> содержат информацию о посещении игроками (<a target="form" href="../Form/GamersColor_bit.htm">побитно</a>), что соответствует <a href="../Rec/CB.htm#V">CB:V</a>. Если посещено, то в подсказке выводится охрана.<br>
<b id="WT">Биты 13-24</b> содержат персональный номер (от 0 до 4095), ссылающийся&nbsp;на&nbsp;<a href="../Rec/CB.htm">CB</a>:A&nbsp;G&nbsp;M&nbsp;R.<br>
<b id="WT">Бит 25</b> содержит, убиты ли стражи или ещё нет, и редактируется командой&nbsp;<a href="../Rec/CB.htm">CB</a>:T.<br>
<b id="WT">Биты 26-31</b> игнорируются и обычно заполнены.</p>

<p><a target="form" href="../Form/CreatureDwellings.htm" name="T17">Типы 17-20</a>. <b>Генератор существ</b><br>
<b id="WT">Биты 0-28</b> содержат персональный номер (от 0 до 536870911) со всеми параметрами <a href="../Rec/DW.htm">DW</a>.<br>
<b id="WT">Биты 29-30</b> игнорируются и обычно пусты.</p>

<p><img src="../Img/pic/AVXskds0.png" style="float:left;margin: 15 10 0 0"><a target="form" href="../Form/objects.htm" name="T22">Тип 22</a>. <b>Скелет</b><br>
<b id="WT">Биты 0-4</b>: номер скелета (0..31) – <a href="../Rec/SC.htm#N">SC:N</a>.<br>
<b id="WT">Бит 5</b> игнорируется и обычно заполнен.<br>
<b id="WT">Биты 6-15</b>: номер артефакта (0..1023) – <a href="../Rec/SC.htm#A">SC:A</a>.<br>
<b id="WT">Бит 16</b>: есть ли артефакт – <a href="../Rec/SC.htm#S">SC:S</a>.<br>
<b id="WT">Биты 17-31</b> игнорируются и обычно заполнены.</p>

<p><img src="../Img/pic/AvSMarl0.png" style="max-width:59;float:right;margin:0 20 0 10"><a target="form" href="../Form/objects.htm" name="T23">Тип 23</a>. <b>Башня Марлетто</b><br>
Так же, как <a href="#T4">Арена</a>, <b id="WT">биты 0-4</b> – номер, остальные игнорируются и обычно пусты. У героя посещение башни Марлетто редактируется командой&nbsp;<a href="../Rec/HE.htm#V">HE:V1</a>.</p>

<p><img src="../Img/pic/AVAdlic0.png" style="float:left;margin:10 10 0 0"><a target="form" href="../Form/objects.htm" name="T24">Тип 24</a>. <b>Ветхий корабль</b><br>
Структура контрольного слова полностью идентична с <a href="#T16">типом 16</a>. Интересно, что, хотя обычно, если посетить ветхий корабль и отказаться от битвы, после этого, в отличие от банка существ, в подсказке к кораблю информации об охране не появляется. А если установить <a href="../Rec/CB.htm#V">CB:V</a> на «посещено» для текущего игрока, эта информация появится.
<div style="position:relative;bottom:35;border:0 solid black; float:right;margin:20 10 0 0; width:100px"><img src="../Img/pic/AVSutop0.png" width="100%"></div></p>

<p><a target="form" href="../Form/objects.htm" name="T25">Тип 25</a>. <b>Утопия драконов</b><br>
И опять полное совпадение с <a href="#T16">типом 16</a>. Можно не описывать.</p>

<p><a target="form" href="../Form/objects.htm" name="T26">Тип 26</a>. <b>Событие</b><br>
Событие и Ящик Пандоры описываются одним ресивером, а Ящик Пандоры я уже описывал. Можно было бы сослаться на него, но у события есть несколько дополнительных параметров, причём все они в контрольном слове.<br>
<b id="WT">Биты 0-9</b>: персональный номер (0..1023). Как и у ящика Пандоры. Соответствует командам&nbsp;<a href="../Rec/LE.htm">LE</a>:A&nbsp;B&nbsp;C&nbsp;E&nbsp;F&nbsp;G&nbsp;M&nbsp;N&nbsp;O&nbsp;P&nbsp;R&nbsp;S&nbsp;U&nbsp;X.<br>
<b id="WT">Биты 10-17</b> содержат информацию о том, каким игрокам НЕЛЬЗЯ активировать событие (<a target="form" href="../Form/GamersColor_bit.htm">побитно</a>) Соответствует <a href="../Rec/LE.htm#D">LE:D</a>.<br>
<b id="WT">Бит 18</b>: разрешать ли ИИ активировать событие. Соответствует <a href="../Rec/LE.htm#I">LE:I</a>.<br>
<b id="WT">Бит 19</b>: отменять ли событие после первого посещения. Соответствует <a href="../Rec/LE.htm#L">LE:L</a>.<br>
<b id="WT">Биты 20-31</b> игнорируются и обычно пусты.</p>

<p><a target="form" href="../Form/objects.htm" name="T29">Тип 29</a>. <b>Обломки</b><br>
Для этого объекта ресивер пока не придумали.<br><img src="../Img/pic/AVAflot0.png" style="float:left;margin:0 10 0 0">
Контрольное слово Обломков может принимать следующие значения:<br>
0 – ничего нет, выдаётся сообщение, что ничего не найдено.<br>
1 – 5 дерева.<br>
2 – 5 дерева и 200 золота.<br>
3 – 10 дерева и 500 золота.<br>
Другие значения в игре не встречаются, а если установить число, большее 3 (или меньшее 0), то обломки будут исчезать без всякого сообщения или прибавления ресурсов. Это можно использовать в ERM, если нужно, чтобы объект плавно исчез при подборе: берём обломки, делаем им в редакторе (пропатченом) другой DEF, ставим им скриптом контрольное слово больше 3, например, 4, делаем им другую подсказку, и в триггере на их посещение делаем нужное нам сообщение или действие. Ничего особенно сложного. (Здесь надо заметить, что такое же поведение можно настроить сундукам командой&nbsp;<a href="../Rec/UN.htm#B">UN:B</a>. Но, сравните алгоритмы:<br>
<ul>	<li>[изменяем UN:B]&rarr;[меняем тип]&rarr;[герой посещает]&rarr;[восстанавливаем UN:B];</li>
	<li>[меняем тип и контрольное слово (один ресивер)]&rarr;[герой посещает].</li></ul>
Второй явно короче.</p>

<p><img src="../Img/pic/AVSfntn0.png" style="float:left;margin:10 10 0 0"><a target="form" href="../Form/objects.htm" name="T30">Тип 30</a>. <b>Фонтан удачи</b><br>
Опять же для этого типа нет ресивера. Поскольку мне не приходилось встречать ничего на эту тему, я сам разобрал контрольное слово этого типа, и вот что у меня вышло:<br>
<b id="WT">Биты 0-4</b> игнорируются и обычно заполнены.<br>
<b id="WT">Биты 5-12</b> содержат информацию о посещении игроками (<a target="form" href="../Form/GamersColor_bit.htm">побитно</a>). Если игрок посетил фонтан, в подсказке выводится, что он делает.<br>
<b id="WT">Биты 13-16</b>: кол-во удачи – от -8 до +7.<br>
<b id="WT">Биты 17-31</b> игнорируются и обычно заполнены.</p>

<p><img src="../Img/pic/AVSgrdn0.png" style="float:left;margin:5 10 0 0"><a target="form" href="../Form/objects.htm" name="T32">Тип 32</a>. <b>Сад откровения</b><br>
Так же, как <a href="#T4">Арена</a>: <b id="WT">биты 0-4</b> – номер, остальные игнорируются и обычно пусты. Посетил ли герой Сад откровения, определяет команда&nbsp;<a href="../Rec/HE.htm#V">HE:V2</a>.</p>

<p><img src="../Img/pic/AVCgar10.png" style="max-width:80;float:right;margin: 0 20 0 0"><a target="form" href="../Form/objects.htm" name="T33">Тип 33</a>. <b>Гарнизон</b><br>
<b id="WT">Биты 0-25</b>: персональный номер (0..67108863). Ему соответствуют все команды&nbsp;<a href="../Rec/GR.htm">GR</a>.<br>
<b id="WT">Биты 26-30</b> игнорируются и обычно пусты.</p>

<p><img src="../Img/pic/ahRandom.png" style="float:left;margin:10 10 0 0"><a target="form" href="../Form/NumberHeroes.htm" name="T34">Тип 34</a>. <b>Герой</b><br>
Контрольное слово содержит номер героя. Учитываются <b id="WT">все биты</b>.<br>
К сожалению, сменить героя сменой номера нельзя. Поставив произвольной жёлтой клетке тип 34 и контрольное слово некоего героя, мы создадим клон героя, которым невозможно управлять, а если этой клеткой будет другой герой, клон исчезнет при его выделении.<br>
Зато мы можем обмениваться с ним армиями, даже если настоящий герой на другом конце карты.<br>
Можно также "вызвать" вражеского или ненанятого героя и сразиться с ним. Причём клоны после поражения исчезают только визуально, но с ними можно сразиться ещё раз (хотя они будут нейтральными, и у них будет типичная армия убитого героя – 1 существо 1го уровня). А "оригинальный" вражеский герой, где бы он ни был, также визуально исчезнет (это происходит оттого, что в игре нет графики для нейтральных героев), но с ним можно будет сражаться. Правда, в отличие от клона, всего один раз.<br>
Создавая клоны своих героев, мы можем добиться их раздвоения: так, если создать клон героя, сидящего в гарнизоне, и выделить его мышкой (иконка "шлем"), то герой появится у входа в замок, т.е. в гостевом слоте, оставаясь в то же время в гарнизоне. Вообще, игра мало предназначена для такого рода экспериментов.</p>

<p><img src="../Img/pic/AVMlean0.png" style="float:left;margin:0 10 0 0"><a target="form" href="../Form/objects.htm" name="T39">Тип 39</a>. <b><b>Чей-то погреб</b> / Навес</b><br>
<b id="WT">Биты 0-4</b>: персональный номер (0-31). Соответствует <a href="../Rec/LN.htm#N">LN:N</a>.<br>
<b id="WT">Бит 5</b> игнорируется и обычно заполнен.<br>
<b id="WT">Биты 6-9</b>: кол-во ресурса(0-15). Если 0, погреб считается посещённым. Соответствует второму параметру <a href="../Rec/LN.htm#B">LN:B</a>.<br>
<b id="WT">Биты 10-13</b>: тип ресурса (0-15). Соответствует первому параметру <a href="../Rec/LN.htm#B">LN:B</a>. О некорректных типах см. <a href="#T12">Костёр покинутого лагеря</a>.<br>
<b id="WT">Биты 14-31</b> игнорируются и обычно заполнены.</p>

<p><img src="../Img/pic/AvSlibr0.png" style="max-width:114;float:right;margin: 0 10 0 0"><a target="form" href="../Form/objects.htm" name="T41">Тип 41</a>. <b>Библиотека Просвещения</b><br>
Так же, как <a href="#T4">Арена</a>: <b id="WT">биты 0-4</b> – номер, остальные игнорируются и обычно пусты. Посетил ли герой Библиотеку, определяет команда&nbsp;<a href="../Rec/HE.htm#V">HE:V6</a>.</p>

<p><img src="../Img/pic/AVXlths0.png" style="max-width:54;float:right;margin:0 20 0 5"><a target="form" href="../Form/objects.htm" name="T42">Тип 42</a>. <b>Маяк</b><br>
<b id="WT">Биты 0-25</b>: персональный номер (0..67108863). Номер ссылается на ту же область данных, что и у Шахты, и Маяк редактируется командами <a href="../Rec/MN.htm">MN</a>. Тип ресурса для него - 100, однако если поставить что-либо другое, хранитель Маяка начнёт это "что-либо" усердно добывать. Охрана игнорируется. (За эту информацию спасибо <code id="N1">sergroj</code>`у.)<br>
<b id="WT">Биты 26-31</b> игнорируются (как и охрана).</p>

<p><img src="../Img/pic/AVXmn4o0.png" style="float:left;margin:15 8 0 5"><a target="form" href="../Form/One-way%20monolith.htm" name="T44">Тип 44</a>. <b>Монолит выхода</b><br>
Контрольное слово представляет собой номер монолита. Каждый подтип нумеруется отдельно. Неизвестно, на что он влияет, поэтому трудно определить, сколько битов используется. Единственное, что ясно – это то, что, если поставить -1, монолит перестаёт работать. При всех остальных значениях он работает. Это заставляет предположить, что читаются все биты.</p>

<p><img src="../Img/monolits/twm4.gif" style="float:left;margin:0 13 0 5"><a target="form" href="../Form/Two-way%20monolith.htm" name="T45">Тип 45</a>. <b>Двусторонний монолит</b><br>
Опять же, контрольное слово – персональный номер с отдельной нумерацией подтипов. Учитываются <b id="WT">все биты</b>. Назначение номера в игре в том, чтобы монолит не телепортировал сам в себя. Таким образом, если поставить двум монолитам одинаковый номер, они не будут друг в друга телепортировать.</p>

<p><img src="../Img/pic/AVSschm5.png" style="max-width:38;float:left;margin:0 10 0 0"><a target="form" href="../Form/objects.htm" name="T47">Тип 47</a>. <b>Школа магии</b><br>
Так же, как <a href="#T4">Арена</a>: <b id="WT">биты 0-4</b> – номер, остальные игнорируются и обычно пусты.<br>
Посетил ли герой Школу магии, определяет команда&nbsp;<a href="../Rec/HE.htm#V">HE:V8</a>.</p>

<p><a target="form" href="../Form/objects.htm" name="T48">Тип 48</a>. <b>Магический источник</b><br><img src="../Img/pic/AVXmags0.png" style="float:right;margin:0 15 0 5">
<b id="WT">Биты 0-4</b>: номер источника (0..31) – <a href="../Rec/SP.htm#N">SP:N</a>. Зачем он нужен – непонятно.<br>
<b id="WT">Бит 5</b> игнорируется и обычно заполнен.<br>
<b id="WT">Бит 6</b>: посещён (1) или нет (0) – <a href="../Rec/SP.htm#S">SP:S</a>.<br>
<b id="WT">Биты 7-31</b> игнорируются и обычно заполнены.</p>

<p><img src="../Img/pic/AVSmerc0.png" style="float:left;margin:0 5 0 0"><a target="form" href="../Form/objects.htm" name="T51">Тип 51</a>. <b>Лагерь наёмников</b><br>
Так же, как <a href="#T4">Арена</a>: <b id="WT">биты 0-4</b> – номер, остальные игнорируются и обычно пусты. Посетил ли герой Лагерь, определяет команда&nbsp;<a href="../Rec/HE.htm#V">HE:V3</a>.</p>

<p><img src="../Img/pic/AVMABMG0.png" style="float:left;margin:10 2 0 0"><a target="form" href="../Form/Mines.htm" name="T53">Тип 53</a>. <b>Шахта</b><br>
<b id="WT">Биты 0-25</b>: персональный номер (0..67108863) со всеми командами&nbsp;<a href="../Rec/MN.htm">MN</a>. Обращу внимание, что Шахты нумеруются параллельно с <a href="#T42">Маяками</a>, как один тип.<br>
<b id="WT">Биты 26-31</b> игнорируются и обычно пусты.</p>

<p><a target="form" href="../Form/Creature.htm" name="T54">Тип 54</a>. <b>Монстр</b><br>
<b id="WT">Биты 0-11</b>: кол-во монстров (0..4095) – <a href="../Rec/MO.htm#G">MO:G</a>. Интересно, что, если поставить значение 4095, при щелчке <img src="../Img/RBM.gif" id="vc"> появляется предложение убрать этот отряд с карты, т. к. он чересчур велик.<br>
<b id="WT">Биты 12-15</b>: вероятность неприсоединения монстра в десятках % (0..10) – <a href="../Rec/MO.htm#R">MO:R</a> с 2 параметрами; если больше 10 – то же, что и 10.<br>
<b id="WT">Бит 16</b>: присоединится ли монстр – <a href="../Rec/MO.htm#R">MO:R</a> с 1 параметром (причём перевёрнутое); если пуст, действует присоединение с вероятностью (предыдущий пункт).<br>
<b id="WT">Бит 17</b>: если заполнен, монстр никогда не убегает – <a href="../Rec/MO.htm#U">MO:U</a>.<br>
<b id="WT">Бит 18</b>: кол-во монстров не увеличивается – <a href="../Rec/MO.htm#O">MO:O</a>.<br>
<b id="WT">Биты 19-26</b>: персональный номер (0..255) с командами <a href="../Rec/MO.htm">MO</a>:A&nbsp;B&nbsp;M.<br>
<b id="WT">Биты 27-30</b> игнорируются и обычно пусты.<br>
<b id="WT">Бит 31</b>: есть ли номер. Аналогично с артефактом, если нет ни артефакта, ни ресурса, ни сообщения, номер не устанавливается. Тогда <a href="../Rec/MO.htm">MO</a>:A&nbsp;B&nbsp;M не работают. Это также упомянуто в описании <a href="../Rec/MO.htm">ресивера MO</a>, и проверка на отрицательность здесь также уместна.<br>
Тип монстра задаётся в подтипе объекта.</p>

<p><a target="form" href="../Form/objects.htm" name="T55">Тип 55</a>. <b>Мистический сад</b><br><img src="../Img/pic/AVTmystB.png" style="float:right;margin:0 15% 0 5">
<b id="WT">Биты 0-4</b>: персональный номер (0..31) – <a href="../Rec/GD.htm#N">GD:N</a>.<br>
<b id="WT">Бит 5</b> игнорируется и обычно заполнен.<br>
<b id="WT">Биты 6-9</b>: тип бонусного ресурса (0..15) – <a href="../Rec/GD.htm#B">GD:B</a>. Если поставить 8..15, игра вылетает.<br>
<b id="WT">Бит 10</b>: есть ли бонус – <a href="../Rec/GD.htm#T">GD:T</a>.<br>
<b id="WT">Биты 11-31</b> игнорируются и обычно заполнены.</p>

<p><img src="../Img/pic/AvXOblW.png" style="float:left;margin:15 10 0 0"><a target="form" href="../Form/objects.htm" name="T57">Тип 57</a>. <b>Обелиск</b><br>
Контрольное слово являет собой персональный номер от 0 до 47, что соответствует <a href="../Rec/MN.htm#N">MT:N</a>. Если указать число, большее 47, программа залезает в не предназначенную для Обелисков память, поэтому обелиск может оказаться посещённым, а если и нет, то при посещении Обелиска карта загадки всё равно не меняется. Кроме того, если указать очень большое значение – порядка десятков миллионов и больше (предельное значение каждый раз разное) – игра вылетает. Какие Обелиски посетил тот или иной игрок, контролирует <a href="../Rec/UN.htm#L1">UN:L</a>.</p>

<p><a target="form" href="../Form/objects.htm" name="T59">Тип 59</a>. <b>Океанская бутыль</b><br><img src="../Img/pic/AVXbttl0.png" style="float:right;margin:0 5 0 10">
<b id="WT">Биты 0-29</b>: персональный номер (0..1073741823) с командой <a href="../Rec/SG.htm#M">SG:M</a>. Нужно заметить, что, если текст не введён или стёрт (<a href="../Rec/SG.htm#M">SG:M-1</a>), то в качестве сообщения берётся случайное из RANDSIGN.TXT, находящегося в h3bitmap.lod. При этом текст генерируется непосредственно перед посещением на основе координат Бутыли, и, если поставить двум бутылкам одинаковый номер, соответствующий случайному тексту, то текст при посещении почти наверняка будет разный.<br>
<b id="WT">Биты 30-31</b> игнорируются и обычно пусты.</p>

<p><img src="../Img/pic/AVSaxis7.png" style="float:left;margin:10 10 0 0"><a target="form" href="../Form/objects.htm" name="T61">Тип 61</a>. <b>Звёздное колесо</b><br>
Так же, как <a href="#T4">Арена</a>: <b id="WT">биты 0-4</b> – номер, остальные игнорируются и обычно пусты. Посетил ли герой Колесо, определяет команда&nbsp;<a href="../Rec/HE.htm#V">HE:V4</a>.</p>

<p><a target="form" href="../Form/objects.htm" name="T62">Тип 62</a>. <b>Тюрьма</b><br><img src="../Img/pic/AVXprsn0.png" style="float:right;margin:0 5 0 10">
Контрольное слово представляет собой номер заключённого героя. При этом можно ставить только номера заключённых в других тюрьмах героев: если поставить номер свободного или ненанятого героя, то выводится сообщение, что здесь когда-то сидел герой, но потом король его освободил. (По-видимому,  где-то в параметрах героя есть байт, определяющий, сидит он или на свободе.) То же выводится при небольших некорректных номерах. При очень больших номерах (порядка десятков миллионов и больше) игра вылетает.</p>

<p><img src="../Img/pic/AVXPRMD0.png" style="float:left;margin:10 10 0 0"><a target="form" href="../Form/NewObj.htm" name="T63">Тип 63</a>. <b>Пирамида</b><br>
<b id="WT">Бит 0</b>: есть ли стражи – <a href="../Rec/PM.htm#V">PM:V</a>.<br>
<b id="WT">Биты 1-4</b> игнорируются и обычно заполнены.<br>
<b id="WT">Биты 5-12</b>: какими игроками посещено (<a target="form" href="../Form/GamersColor_bit.htm">побитно</a>) – <a href="../Rec/PM.htm#P">PM:P</a>.<br>
<b id="WT">Биты 13-20</b>: номер заклинания (0..255) – <a href="../Rec/PM.htm#S">PM:S</a>.<br>
<b id="WT">Биты 21-31</b> игнорируются и обычно заполнены.</p>

<p><img src="../Img/pic/AVGrefg0.png" style="float:left;margin:10 10 0 0"><a target="form" href="../Form/objects.htm" name="T78">Тип 78</a>. <b>Лагерь беженцев</b><br>
<b id="WT">Биты 0-15</b>: число монстров (-32768..32767).<br>
<b id="WT">Биты 16-31</b> игнорируются и обычно пусты.<br>
Тип монстров задаётся в подтипе лагеря.</p>

<p><a target="form" href="../Form/Resource.htm" name="T79">Тип 79</a>. <b>Ресурс</b><br>
Контрольное слово устроено точно так же, как и у <a href="#T5">артефакта</a>, только <b id="WT">биты 0-14</b>, соответствующие <a href="../Rec/AR.htm#V">AR:V</a>, содержат кол-во ресурса.</p>

<p><img src="../Img/pic/AVXschl7.png" style="float:left;margin:15 10 0 0"><a target="form" href="../Form/objects.htm" name="T81">Тип 81</a>. <b>Учёный</b><br>
<b id="WT">Биты 0-2</b>: тип бонуса (0..7) – <a href="../Rec/SC.htm#T">SC:T</a>:<br>
0 – первичный навык; 1 – вторичный навык; 2 – заклинание;<br>
3..7 – Учёный ничего не даёт и плавно исчезает без сообщения. Это можно использовать так же, как и аналогичное свойство <a href="#T29">Обломков</a>.<br>
<b id="WT">Биты 3-5</b>: тип первичного навыка (0..7) – <a href="../Rec/SC.htm#P">SC:P</a>. Если поставить от 4 до 7, первичные навыки не меняются, а Учёный, судя по картинкам, обучает вас строить Гильдии Магов 2 уровня в Темнице, Цитадели, Крепости и Сопряжении, соответственно.<br>
<b id="WT">Биты 6-12</b>: номер вторичного навыка (0..127) – <a href="../Rec/SC.htm#S">SC:S</a>. Если поставить некорректное заклинание и установить <a href="../Rec/SC.htm#T">SC:T1</a>, игра при посещении вылетает.<br>
<b id="WT">Биты 13-22</b>: номер заклинания (0..1023) – <a href="../Rec/SC.htm#L">SC:L</a>. Если поставить некорректное, уже изученное или неизучаемое данным героем заклинание – будет изучаться первичный навык.<br>
<b id="WT">Бит 23</b> игнорируется и обычно пуст.<br>
<b id="WT">Биты 24-31</b> игнорируются и обычно заполнены.</p>

<p><a target="form" href="../Form/objects.htm" name="T82">Тип 82</a>. <b>Морской сундук</b><br><img src="../Img/pic/AVXccht0.png" style="float:right;margin:0 10 0 5">
Для этого типа ресивера нет, но бдительные форумчане, носящие гордые имена <code id="N1">Demiurg</code>, <code id="N1">DracoLich</code> и <code id="N1">Чёртос-2</code> (или кто-то один из них; или двое; все трое писали про это посты, но никто не претендовал на авторство), расшифровали-таки значение его контрольного слова. Привожу здесь их открытие. Естественно, своими словами.<br>
<b id="WT">Биты 0-2</b>: тип подбора сундука (0..7): 0 – пусто, 1 – 1500 золота, 2 – 1000 золота и артефакт. Если установлено значение от 3 до 7, то сундук плавно исчезает безо всякого сообщения, и этому можно найти применение – см. <a href="#T29">Обломки</a>.<br>
<b id="WT">Биты 3-12</b>: номер артефакта (0..1023). Если поставить некорректное значение и установить тип подбора 2, то при подборе игра вылетает. Если поставлен тип подбора 0 или 1, здесь по умолчанию стоит -1, т. е. 1023.<br>
<b id="WT">Биты 13-31</b> игнорируются и обычно заполнены.</p>

<p><img src="../Img/pic/AVXseey0.png" style="float:left;margin:10 10 0 0"><a target="form" href="../Form/objects.htm" name="T83">Тип 83</a>. <b>Хижина провидца</b><br>
Контрольное слово представляет собой персональный номер, ссылающийся на недоступную нам область данных, где и находятся все параметры хижины.<br>
Учитываются <b id="WT">все биты</b>.</p>

<p><img src="../Img/pic/AVStmpl0.png" style="float:left;margin:0 5 0 0"><a target="form" href="../Form/objects.htm" name="T84">Тип 84</a>. <b>Склеп</b><br>
Структура контрольного слова полностью идентична <a href="#T16">типу 16</a>.<br>
Здесь уместно то же замечание, что и для <a href="#T24">Ветхого корабля</a>.</p>

<p><a target="form" href="../Form/objects.htm" name="T85">Тип 85</a>. <b>Кораблекрушение</b><br>
То же, что <a href="#T24">Ветхий корабль</a>.</p>

<p><img src="../Img/pic/AVAsurv0.png" style="float:left;margin:0 10 0 0"><a target="form" href="../Form/objects.htm" name="T86">Тип 86</a>. <b>Потерпевший кораблекрушение</b><br>
Опять же, здесь меня опередил <code id="N1">Demiurg</code>. Тем не менее запишем:<br>
<b id="WT">Биты 0-29</b>: номер артефакта (0..1073741823). Если поставить очень большие некорректные значения, вроде [2<sup>28</sup>+<a target="form" href="../Form/A1.htm">номер артефакта</a>], то этот артефакт даже получится поднять без вылета. Правда, кликать на него после этого правой мышкой или пытаться передвинуть в другой слот я бы не советовал.<br>
<b id="WT">Биты 30-31</b> игнорируются и обычно пусты.</p>

<p><a target="form" href="../Form/objects.htm" name="T87">Тип 87</a>. <b>Верфь</b><br><img src="../Img/pic/AVXshyd0.png" style="float:right;margin:0 10 0 5">
<b id="WT">Биты 0-7</b>: владелец верфи (0..255) – <a href="../Rec/SY.htm#O">SY:O</a>. Некорректные значения могут окрасить флаг в самые неожиданные цвета, хотя обычно этот цвет – белый.<br>
<b id="WT">Биты 8-15</b>: X-координата для постройки корабля (0..255) – <a href="../Rec/SY.htm#P">SY:P</a>.<br>
<b id="WT">Биты 16-23</b>: Y-координата для постройки корабля (0..255) – <a href="../Rec/SY.htm#P">SY:P</a>. Нужно заметить, что, когда лодка покупается дистанционно, кликом по верфи, то эти параметры игнорируются и лодка строится в ближайшей водной клетке. Если поставить выходящие за край карты значения, вылетать не будет, просто лодка нигде не построится. Скорее всего вместо этого изменятся другие совершенно посторонние данные.</p>

<p><a target="form" href="../Form/objects.htm" name="T88">Типы 88-90</a>. <b>Святыни магического воплощения, жеста и мысли</b><br><img src="../Img/pic/AVXl1sh0.png" style="float:right;margin:0 20 0 5">
<b id="WT">Биты 0-4</b> игнорируются и обычно заполнены.<br>
<b id="WT">Биты 5-12</b>: какие игроки посетили Святыню (<a target="form" href="../Form/GamersColor_bit.htm">побитно</a>). Если игрок посетил Святыню, он знает, что в ней изучают.<br>
<b id="WT">Биты 13-22</b>: номер изучаемого заклинания (0..1024) – <a href="../Rec/SR.htm#S">SR:S</a>. Если поставить некорректное значение, пишут, что вы уже изучили это заклинание. Хотя я не проверял все значения.<br>
<b id="WT">Биты 23-31</b> игнорируются и обычно пусты.</p>

<p><img src="../Img/pic/AVXsndg0.png" style="float:left;margin:0 10 0 5"><a target="form" href="../Form/objects.htm" name="T91">Тип 91</a>. <b>Знак</b><br>
Аналогично с <a href="#T59">Океанской бутылью</a>. Только Знак не исчезает после подбора.</p>

<p><img src="../Img/art/Art001.gif" style="float:left;margin:10 10 0 0"><a target="form" href="../Form/objects.htm" name="T93">Тип 93</a>. <b>Свиток с заклинанием</b><br>
Контрольное слово представляет собой <a target="form" href="../Form/Spell.htm">номер заклинания</a>.<br>
Учитываются <b id="WT">все биты</b>.</p>

<p><img src="../Img/pic/AVCranx0.png" style="max-width:120;float:right;margin:5 5 5 10"><a target="form" href="../Form/Towns.htm" name="T98">Тип 98</a>. <b>Город</b><br>
<b id="WT">Биты 0-28</b>: персональный номер (0..536870911) со всеми параметрами.<br>
<b id="WT">Биты 29-31</b> игнорируются и обычно пусты.<br>
Если поставить одному городу номер другого, произойдёт следующее:
<ol type=I id="T0">
<li>Если номер сменён не на входе:
	<ol><li>Сменится подсказка по щелчку правой мышкой на этой клетке города, но не на других; подсказка по наведении останется неизменной.</li>
	<li>При клике на эту клетку выделится город, номер которого поставлен; если он уже выделен, откроется меню города, однако, если город не ваш, при наведении на эту клетку курсор на иконку замка не изменится. Город не будет выделяться (самое начало предложения), если он принадлежит не вам и выделен какой-либо герой, а не город.</li></ol>
</li>
<li>	Если номер сменён на входе:
	<ol><li>В дополнение к предыдущему изменится также подсказка при наведении (на любую клетку города): сменится имя города. Тип города останется неизменным, он зависит от подтипа клетки при входе.</li>
	<li>Также сменится цвет флажков.</li>
	<li>Если зайти в изменённый вход, сначала совершатся некоторые проверки, связанные с исходным городом: так, если он принадлежит не вам и там есть охрана, вас заставят сражаться; после победы, или если не было охраны, хозяином города станете вы, в чём можно убедиться, поставив на вход исходный номер.</li>
	<li>После чего откроется меню исходного города. Зашедшего героя там не будет, т.к. он будет находиться в гостевом слоте сменённого города.</li>
	<li>Если переместить зашедшего героя в гарнизон и обратно, то он переместится в сменённый город уже на глобальной карте.</li>
	<li>Если попытаться нанять в исходном городе героя, игра вылетит.</li>
	<li>Самые жестокие глюки получаются, если обменять номера у двух городов. Герой-посетитель может уйти из города и одновременно остаться в гостевом слоте, может попасть в гостевые слоты и гарнизоны обоих городов сразу, оказаться в гостевом слоте и гарнизоне одного города одновременно и раздвоиться&hellip; ещё тысячей других способов.</li></ol>
</li></ol></p>

<p><img src="../Img/pic/AVSgzbo7.png" style="float:left;margin:0 10 0 3"><a target="form" href="../Form/objects.htm" name="T100">Тип 100</a>. <b>Камень знаний</b><br>
Так же, как <a href="#T4">Арена</a>: <b id="WT">биты 0-4</b> – номер, остальные игнорируются и обычно пусты. Посетил ли герой Камень, определяет команда&nbsp;<a href="../Rec/HE.htm#V">HE:V0</a>.</p>

<p><img src="../Img/pic/AVTchst6.png" style="float:left;margin:0 10 0 0"><a target="form" href="../Form/objects.htm" name="T101">Тип 101</a>. <b>Сундук с сокровищами</b><br>
<b id="WT">Биты 0-9</b>: номер артефакта (0..1023) – <a href="../Rec/CH.htm#A">CH:A</a>.<br>
<b id="WT">Бит 10</b>: тип бонуса (0 – золото, 1 – артефакт) – <a href="../Rec/CH.htm#S">CH:S</a>.<br>
<b id="WT">Биты 11-14</b>: показатель кол-ва золота (0..15) – <a href="../Rec/CH.htm#B">CH:B</a>. Кол-во золота = [показатель] * 500.<br>
<b id="WT">Биты 15-31</b> игнорируются и обычно заполнены.</p>

<p><a target="form" href="../Form/objects.htm" name="T102">Тип 102</a>. <b>Древо знаний</b><br><img src="../Img/pic/AVXtrek0.png" style="float:right;margin:0 10 0 10">
<b id="WT">Биты 0-4</b>: номер Древа (0..31) – <a href="../Rec/KT.htm#N">KT:N</a>. Посетил ли герой Древо, определяет команда&nbsp;<a href="../Rec/HE.htm#V">HE:V5</a>.<br>
<b id="WT">Биты 5-12</b>: информация о посещении игроками (<a target="form" href="../Form/GamersColor_bit.htm">побитно</a>). Игрок, посетивший Древо, видит в подсказке для него тип получения уровня.<br>
<b id="WT">Биты 13-15</b>: тип получения уровня (0..3) – <a href="../Rec/KT.htm#S">KT:S</a>. Если поставить тип подбора 3, при посещении Древа игра зависает, а в подсказке (если поставить в биты 5-12, что Дерево уже посещали) пишется, что Древо это ни что иное, как улучшенный генератор существ 4 уровня.<br>
<b id="WT">Биты 16-31</b> игнорируются и обычно заполнены.</p>

<p><img src="../Img/pic/AvTCave0.png" style="max-width:86;float:left;margin:0 10 0 0"><a target="form" href="../Form/objects.htm" name="T103">Тип 103</a>. <b>Врата подземного мира</b><br>
<b id="WT">Биты 0-29</b>: персональный номер Врат (0..1073741823). Номер ссылается на область данных, где записаны координаты целевых врат или отсутствие оных – если на одном уровне врат больше, часть отключается.<br>
<b id="WT">Биты 30-31</b> игнорируются и обычно пусты.</p>

<p><a target="form" href="../Form/objects.htm" name="T104">Тип 104</a>. <b>Университет</b><br><img src="../Img/pic/AVSuniv0.png" style="max-width:118;float:right;margin:10 10 0 5">
<b id="WT">Биты 0-4</b> игнорируются и обычно заполнены.<br>
<b id="WT">Биты 5-12</b> игнорируются и обычно пусты. Эти биты обычно содержат информацию о посещении игроками, но я не заметил ни каких-либо изменений в контрольном слове Университета при посещении, ни каких-либо изменений в подсказке Университета при заполнении этих битов.<br>
<b id="WT">Биты 13-24</b>: персональный номер Университета (0..4095) с командой <a href="../Rec/UR.htm#S">UR:S</a>.<br>
<b id="WT">Биты 25-31</b> игнорируются и обычно пусты.</p>

<p><img src="../Img/pic/AVTwagn0.png" style="float:left;margin:0 10 0 0"><a target="form" href="../Form/objects.htm" name="T105">Тип 105</a>. <b>Телега</b><br>
<b id="WT">Биты 0-4</b>: кол-во ресурсов (0..31) – второй параметр <a href="../Rec/WG.htm#R">WG:R</a>.<br>
<b id="WT">Биты 5-12</b>: какие игроки посетили телегу (<a target="form" href="../Form/GamersColor_bit.htm">побитно</a>).<br>
<b id="WT">Бит13</b>: есть ли что-то в телеге – <a href="../Rec/WG.htm#S">WG:S</a>.<br>
<b id="WT">Бит14</b>: тип бонуса (0 – ресурсы, 1 – артефакт) – <a href="../Rec/WG.htm#B">WG:B</a>.<br>
<b id="WT">Биты 15-24</b>: номер артефакта (0..1023) – <a href="../Rec/WG.htm#A">WG:A</a>.<br>
<b id="WT">Биты 25-28</b>: тип ресурса (0..15) – первый параметр <a href="../Rec/WG.htm#R">WG:R</a>.<br>
<b id="WT">Биты 29-31</b> игнорируются и обычно заполнены.</p>

<p><img src="../Img/pic/AVSwar20.png" style="max-width:90;float:right;margin:0 10 0 5"><a target="form" href="../Form/objects.htm" name="T107">Тип 107</a>. <b>Школа войны</b><br>
Так же, как <a href="#T4">Арена</a>: <b id="WT">биты 0-4</b>: – номер, остальные игнорируются и обычно пусты. Посетил ли герой Школу, определяет команда&nbsp;<a href="../Rec/HE.htm#V">HE:V9</a>.</p>

<p><img src="../Img/pic/AVXtomb0.png" style="float:left;margin:20 10 0 0"><a target="form" href="../Form/objects.htm" name="T108">Тип 108</a>. <b>Могила воина</b><br>
<b id="WT">Бит 0</b>: есть ли артефакт – <a href="../Rec/WT.htm#S">WT:S</a>.<br>
<b id="WT">Биты 1-4</b> игнорируются и обычно заполнены.<br>
<b id="WT">Биты 5-12</b>: какие игроки посетили могилу (<a target="form" href="../Form/GamersColor_bit.htm">побитно</a>).<br>
<b id="WT">Биты 13-22</b>: номер артефакта (0..1023) – <a href="../Rec/WT.htm#A">WT:A</a>. Если поставить некорректный номер, при попытке обыскать могилу игра вылетает.<br>
<b id="WT">Биты 23-31</b> игнорируются и обычно заполнены.</p>

<p><img src="../Img/pic/AVMwwhl0.png" style="float:right;margin:0 7 0 10"><a target="form" href="../Form/objects.htm" name="T109">Тип 109</a>. <b>Водяное колесо</b><br>
<b id="WT">Биты 0-4</b>: показатель кол-ва золота (0..15) – <a href="../Rec/WM.htm#B">WM:B</a>. Кол-во золота = [показатель] * 500. Если показатель равен 0, то мельник говорит, что золота нет.<br>
<b id="WT">Биты 5-12</b>: какие игроки посетили колесо (<a target="form" href="../Form/GamersColor_bit.htm">побитно</a>). Если игрок посетил колесо, в подсказке для него пишется, заходил ли он туда на этой неделе.<br>
<b id="WT">Биты 13-31</b> игнорируются и обычно заполнены.</p>

<p><a target="form" href="../Form/objects.htm" name="T112">Тип 112</a>. <b>Ветряная мельница</b><br><img src="../Img/pic/AVMwndd4.png" style="float:right;margin:0 0 0 5">
<b id="WT">Биты 0-3</b>: тип ресурса (0..15) – первый параметр <a href="../Rec/ML.htm#B">ML:B</a>. Если поставить некорректное значение, игра вылетает.<br>
<b id="WT">Бит 4</b> игнорируется и обычно пуст.<br>
<b id="WT">Биты 5-12</b>: какие игроки посетили мельницу (<a target="form" href="../Form/GamersColor_bit.htm">побитно</a>). Если игрок посетил мельницу, в подсказке для него пишется, заходил ли он туда на этой неделе.<br>
<b id="WT">Биты 13-16</b>: кол-во ресурсов (0..15) – второй параметр <a href="../Rec/ML.htm#B">ML:B</a>. Если 0, мельник говорит, что ресурсов нет.<br>
<b id="WT">Биты 17-31</b> игнорируются и обычно пусты.</p>

<p><img src="../Img/pic/AVSwtch0.png" style="float:left;margin:15 0 0 0"><a target="form" href="../Form/objects.htm" name="T113">Тип 113</a>. <b>Хижина ведьмы</b><br>
<b id="WT">Биты 5-12</b>: информация о посещении игроками (<a target="form" href="../Form/GamersColor_bit.htm">побитно</a>). Игрок, посетивший хижину, видит в подсказке для неё изучаемый навык.<br>
<b id="WT">Биты 13-19</b>: изучаемый навык (0..127). Если поставить некорректное значение в подсказке навык будет именоваться как (null), а при посещении игра вылетит.<br>
<b id="WT">Биты 20-31</b> игнорируются и обычно пусты.</p>

<p><img src="../Img/pic/AVXbor80.png" style="float:left;margin:0 15 0 5"><a target="form" href="../Form/objects.htm" name="T215">Тип 215</a>. <b>Страж прохода</b><br>
Контрольное слово представляет собой персональный номер Стража.<br>
Учитываются <b id="WT">все биты</b>.<br>
Мы пока не можем изменять параметры Стражей прохода и Хижин провидца, но можем менять их номера как готовые наборы параметров. К сожалению, после открытия прохода задание у Стража (по аналогии с Хижиной провидца) стирается, и если мы поставим двум Стражам одинаковый номер, то открыть можно будет лишь один из них: после открытия одного второй превратится в каменный столб и не будет выдавать сообщений при посещении, как то случается с ненастроенными Стражами. В принципе, и это можно использовать.<br>
Например, в "Жизни приключений", когда герою предстоит выбрать две из четырёх стихий магии, можно было бы поставить Cтражам прохода, требующим одинаковые брелки, одинаковый номер. Тогда не осталось бы лишних записей в журнале и можно было бы поставить недоступному после выбора Cтражу сообщение типа "Вы уже сделали свой выбор.".</p>

<a name="3"></a><h3>Зачем это всё нужно?</h3>
<p>Как можно заметить, я несколько абзацев сначала объяснял, как правильно складывать 10 и 10, чтобы получить 100, а не 110101 (и не 20), а затем долго и нудно излагал, где какие биты что означают. У читателя, прочитавшего это всё целиком, если такие есть (на что я не надеюсь; я всё-таки пишу не беллетристику, а своего рода справочник), или хотя бы бегло всё просмотревшего, складывается впечатление, что автор страдает гибридом графомании и трудоголии и ему некуда девать свои созидательные усилия, кроме как на всякого рода макулатуру.<br>
Короче, читатель задаёт себе вопрос: а зачем это всё нужно?<br>
Отвечаю. В исследовании есть немного полезной и действительно новой информации. Например, контрольное слово для Фонтана удачи и расположения персональных номеров и информации о посещении, для которой зачастую нет команды ERM. В тех же случаях, когда я разбирал, скажем, Магический источник, все параметры которого задаются через ERM, я также сделал немного полезного. Из приведённого расположения можно выковырять целых 27 свободных для записи битов для тех, кто не знает, что такое <a href="../Rec/PO.htm">!!PO</a> или просто экономит.<br>
Кроме того, систематизация – великая вещь. Авось кому-либо пригодится.<br>
Наконец, у меня чётко указан диапазон возможных значений параметра. Во-первых, в ERM Help он не всегда указан, во-вторых, часто бывают некорректные значения, которые иногда дают интересный эффект, и, наконец, всегда можно сказать, сколько артефактов, заклинаний или чего-то ещё в этом роде может "выдержать" игра. Так, артефакту почти везде отводится 10 бит (за исключением Потерпевшего кораблекрушение: там номер артефакта занимает аж 30 бит!), и поэтому будет достаточно сложно сделать 1025 и более артефактов (придётся привлекать ERM), а вот 1024 – пожалуйста. Заклинанию также обычно уделяется 10 бит, только в Пирамиде под него отводится лишь 8. Но последнее можно устранить лёгким исправлением exe-шника (хотя 256 заклинаний можно наделать и без него), а вот 1025 и более разных магий – это уже проблематично.</p>

<h3>А что у нас нового?</h3>
<p>Но, возможно, не все захотят вылавливать клецки истины из супа словоблудия, и специально для этих лентяев я выпишу ту самую полезную и новую информацию сжато и конспективно в небольшом списке. Читайте на здоровье. Итак, у нас в программе:
<ul>
<li>	Персональные номера для типов 5, 6, 16 и многих других: где их искать и что с ними делать. Много интересных фактов.</li>
<li>	Если поставить Костру покинутого лагеря значения 8-15 в качестве типа ресурса, то&hellip; Почитайте, узнаете.</li>
<li>	Лебединое озеро не имеет параметров! Зачем же тогда !!SW? Не знаю. Вероятно, для красоты.</li>
<li>	При некоторых значениях контрольного слова Обломки и Учёные (а также неиспользуемые сундуки – но это все знают) при посещении плавно исчезают без всякого сообщения. Это самое плавное исчезновение средствами ERM не получишь – только так. Зато тип и контрольное слово мы менять умеем&hellip;</li>
<li>	Контрольное слово для Фонтана удачи – впервые на арене!</li>
<li>	К чему приводит баловство с номерами городов и героев – подробное описание.</li>
<li>	Если в Чьём-то погребе (или мельницах) указать кол-во ресурса 0, он считается посещённым, в отличие от телеги, где вы всегда сможете найти 0 дерева или руды.</li>
<li>	Если поставить монстрам кол-во 4095, то по клику <img src="../Img/RBM.gif" id="vc"> появится предложение убрать его с карты, т.к. он чересчур велик.</li>
<li>	Рассмотрены проблемы генерации случайных сообщений в Знаках и Океанских бутылях.</li>
<li>	Рассказано, что будет, если поставить Учёного, обучающего первичным навыкам под номерами 4-7.</li>
<li>	В битах 5-12 многих объектов находится информация об их посещении игроками, однако далеко не всегда это редактируется ERM.</li>
</ul>
А также многое другое, что я посчитал ненужным вылавливать.</p>

<p>На этом позвольте закончить.</p>

</DIV>
<script src="../erm.js"></script></body></html>

